webpackJsonp([0],{"/yZd":function(e,t,o){o("D3Oz"),e.exports=o("FeBl").Number.isSafeInteger},"4IN0":function(e,t,o){"use strict";var r;!function(e){e[e["智能电视"]=1001]="智能电视",e[e["影音房"]=1002]="影音房"}(r||(r={})),t.a=r},"4WTo":function(e,t,o){var r=o("NWt+");e.exports=function(e,t){var o=[];return r(e,!1,o.push,o,t),o}},"4rS8":function(e,t,o){e.exports={default:o("/yZd"),__esModule:!0}},"5gnR":function(e,t,o){"use strict";t.b=function(e){return Object(r.a)({url:"http://192.168.14.86:8080/ott-manage/rest/ott/store/room-type/list",method:"get",params:e,headers:{"Content-Type":"application/json",token:Object(i.a)()}})},t.a=function(){return Object(r.a)({url:"http://192.168.14.86:8080/ott-manage/rest/ott/store/room-type/all",method:"get"})};var r=o("vLgD"),i=o("TIfe");console.log(Object({NODE_ENV:"production",BASE_API:"http://192.168.14.86:8080/ott-manage/rest",GAIA_API:"http://192.168.14.15:8080/gaia/rest",VALID_IMG_URL:"http://192.168.14.15:8080/gaia/rest/user-login/verifyImage/"}))},"7Doy":function(e,t,o){var r=o("EqjI"),i=o("7UMu"),a=o("dSzd")("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},"9Bbf":function(e,t,o){"use strict";var r=o("kM2E");e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},"9C8M":function(e,t,o){"use strict";var r=o("evD5").f,i=o("Yobk"),a=o("xH/j"),s=o("+ZMJ"),n=o("2KxR"),l=o("NWt+"),d=o("vIB/"),c=o("EGZi"),u=o("bRrM"),m=o("+E39"),p=o("06OY").fastKey,f=o("LIJb"),v=m?"_s":"size",h=function(e,t){var o,r=p(t);if("F"!==r)return e._i[r];for(o=e._f;o;o=o.n)if(o.k==t)return o};e.exports={getConstructor:function(e,t,o,d){var c=e(function(e,r){n(e,c,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=r&&l(r,o,e[d],e)});return a(c.prototype,{clear:function(){for(var e=f(this,t),o=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete o[r.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var o=f(this,t),r=h(o,e);if(r){var i=r.n,a=r.p;delete o._i[r.i],r.r=!0,a&&(a.n=i),i&&(i.p=a),o._f==r&&(o._f=i),o._l==r&&(o._l=a),o[v]--}return!!r},forEach:function(e){f(this,t);for(var o,r=s(e,arguments.length>1?arguments[1]:void 0,3);o=o?o.n:this._f;)for(r(o.v,o.k,this);o&&o.r;)o=o.p},has:function(e){return!!h(f(this,t),e)}}),m&&r(c.prototype,"size",{get:function(){return f(this,t)[v]}}),c},def:function(e,t,o){var r,i,a=h(e,t);return a?a.v=o:(e._l=a={i:i=p(t,!0),k:t,v:o,p:r=e._l,n:void 0,r:!1},e._f||(e._f=a),r&&(r.n=a),e[v]++,"F"!==i&&(e._i[i]=a)),e},getEntry:h,setStrong:function(e,t,o){d(e,t,function(e,o){this._t=f(e,t),this._k=o,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?c(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,c(1))},o?"entries":"values",!o,!0),u(t)}}},AKgy:function(e,t,o){var r=o("EqjI"),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},ALrJ:function(e,t,o){var r=o("+ZMJ"),i=o("MU5D"),a=o("sB3e"),s=o("QRG4"),n=o("oeOm");e.exports=function(e,t){var o=1==e,l=2==e,d=3==e,c=4==e,u=6==e,m=5==e||u,p=t||n;return function(t,n,f){for(var v,h,b=a(t),g=i(b),y=r(n,f,3),_=s(g.length),C=0,F=o?p(t,_):l?p(t,0):void 0;_>C;C++)if((m||C in g)&&(h=y(v=g[C],C,b),e))if(o)F[C]=h;else if(h)switch(e){case 3:return!0;case 5:return v;case 6:return C;case 2:F.push(v)}else if(c)return!1;return u?-1:d||c?c:F}}},BDhv:function(e,t,o){var r=o("kM2E");r(r.P+r.R,"Set",{toJSON:o("m9gC")("Set")})},BO1k:function(e,t,o){e.exports={default:o("fxRn"),__esModule:!0}},Cdx3:function(e,t,o){var r=o("sB3e"),i=o("lktj");o("uqUo")("keys",function(){return function(e){return i(r(e))}})},D3Oz:function(e,t,o){var r=o("kM2E"),i=o("AKgy"),a=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return i(e)&&a(e)<=9007199254740991}})},D7p0:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("Gu7T"),i=o.n(r),a=o("mvHQ"),s=o.n(a),n=o("woOf"),l=o.n(n),d=o("fZjL"),c=o.n(d),u=o("BO1k"),m=o.n(u),p=o("lHA8"),f=o.n(p),v=o("4rS8"),h=o.n(v),b=void 0;!function(e){e[e.NONE=0]="NONE",e[e.ENABLED=2]="ENABLED",e[e.DISABLED=4]="DISABLED"}(b||(b={}));var g=b,y=o("zL8q"),_=o("l+zr"),C=o("ER89"),F=o("5gnR"),w=o("4IN0"),D={name:"DeviceList",components:{DeviceDetailDialog:_.a},data:function(){var e=this;return{editRules:{storeName:[{required:!0,trigger:"blur",validator:function(t,o,r){o.length<1?(e.editForm.storeName="",r(new Error("门店名称不能为空"))):r()}}],brandCode:[{required:!0,trigger:"blur",validator:function(t,o,r){o.length<1?(e.editForm.brandCode="",r(new Error("设备品牌必填"))):r()}}],typeCode:[{required:!0,trigger:"blur",validator:function(t,o,r){o.length<1?(e.editForm.typeCode="",r(new Error("设备型号必填"))):r()}}],roomNo:[{required:!0,trigger:"blur",validator:function(t,o,r){o.trim().length<1?(e.editForm.roomNo="",r(new Error("房间号必须填"))):r()}}],roomType:[{required:!0,trigger:"blur",validator:function(t,o,r){(h()(1*o)&&""+o).trim().length<1?(e.editForm.roomType="",r(new Error("房间类型必填"))):r()}}],uuid:[{required:!0,trigger:"blur",validator:function(t,o,r){o.trim().length<1?(e.editForm.uuid="",r(new Error("uuid必须填"))):r()}}]},addRules:{brandCode:[{required:!0,trigger:"blur",validator:function(t,o,r){o.length<1?(e.addForm.brandCode="",r(new Error("设备品牌必填"))):r()}}],typeCode:[{required:!0,trigger:"blur",validator:function(t,o,r){o.length<1?(e.addForm.typeCode="",r(new Error("设备型号必填"))):r()}}],roomNo:[{required:!0,trigger:"blur",validator:function(t,o,r){o.trim().length<1?(e.addForm.roomNo="",r(new Error("房间号必须填"))):r()}}],roomType:[{required:!0,trigger:"blur",validator:function(t,o,r){(h()(1*o)&&""+o).trim().length<1?(e.addForm.roomType="",r(new Error("房间类型必须填"))):r()}}],uuid:[{required:!0,trigger:"blur",validator:function(t,o,r){o.trim().length<1?(e.addForm.uuid="",r(new Error("uuid必须填"))):r()}}]},dialogData:{},multipleSelection:[],EnabledType:g,enableType:g.NONE,labelWidth:"120px",editVisible:!1,addVisible:!1,editForm:{storeName:"",storeId:"",brandCode:"",typeCode:"",roomNo:"",roomType:0,uuid:"",devicesId:""},addForm:{storeId:"",storeName:"",brandCode:"",typeCode:"",model:"",roomNo:"",roomType:"",uuid:""},needShow:!1,pageIndex:1,pageSize:20,deviceBrands:[],deviceModels:[],filterForm:{internalId:"",storeId:"",deviceBrand:"",deviceModel:"",roomNo:"",deviceUuid:"",apkVersion:""},dataList:[],total:0,roomTypeNames:[],storeNames:[],selStoreList:[],loading:!1,roomTypes:[],condition:{roomTypeName:null,status:null},RoomTypeConfig:w.a,sortType:null}},computed:{enableText:function(){return this.enableType===g.ENABLED?"确认启用所选设备？":this.enableType===g.DISABLED?"确认禁用所选设备？":""},enableVisible:function(){return this.enableType===g.ENABLED||this.enableType===g.DISABLED}},mounted:function(){this.getDeviceBrands(),this.fetchData({}),this.getAllRoomType()},methods:{filterData:function(e,t,o){if(Array.isArray(e)){var r=new f.a,i=[],a=!0,s=!1,n=void 0;try{for(var l,d=m()(e);!(a=(l=d.next()).done);a=!0){var c=l.value,u=c[t];r.has(u)||(r.add(u),i.push({text:u,value:c.typeCode}))}}catch(e){s=!0,n=e}finally{try{!a&&d.return&&d.return()}finally{if(s)throw n}}this[o]=i}},getAllRoomType:function(){var e=this;Object(F.a)().then(function(t){e.filterData(t,"typeName","roomTypeNames")}).catch(function(){})},handleBrandChange:function(e){var t=this;this.deviceModels=[],e?Object(C.e)(e).then(function(e){t.deviceModels=e}).catch(function(){t.deviceModels=[]}):this.filterForm.deviceModel=""},handleBrandChangeAdd:function(e){var t=this;this.deviceModels=[],e&&Object(C.e)(e).then(function(e){t.deviceModels=e,t.addForm.typeCode=""}).catch(function(){t.deviceModels=[]})},handleBrandChangeEdit:function(e){var t=this;this.editForm.typeCode="",this.deviceModels=[],e&&Object(C.e)(e).then(function(e){t.deviceModels=e,t.editForm.typeCode=""}).catch(function(){t.deviceModels=[]})},getDeviceBrands:function(){var e=this;Object(C.c)().then(function(t){e.deviceBrands=t}).catch(function(){})},filterRoomTypeName:function(e,t,o){var r=o.property;return this.condition.roomTypeName=e,t[r]===w.a[e]},filterStatus:function(e,t,o){var r=o.property;return this.condition.status=e,t[r]===e},filterChanged:function(e){var t=c()(e)[0];e[t].length?this.condition[t]=e[t][0]:this.condition[t]=null,this.queryData()},navToDeviceDetail:function(e){this.$router.push("/ott/storeDetail/"+e.storeId)},pageChanged:function(e){this.pageIndex=e,this.queryData()},sizeChanged:function(e){this.pageSize=e,this.queryData()},showDeviceDetail:function(e){var t=this;Object(C.b)({deviceUuid:e.deviceUuid}).then(function(e){t.needShow=!0,t.dialogData=e}).catch(function(){})},fetchData:function(e){var t=this;Object(C.d)(e,this.pageIndex-1,this.pageSize,this.sortType).then(function(o){t.dataList=o.list,t.total=o.total,t.total&&!o.list.length&&(t.pageIndex=1,Object(C.d)(e,t.pageIndex-1,t.pageSize,t.sortType).then(function(e){t.dataList=e.list,t.total=e.total}))}).catch(function(){})},resetForm:function(e){this.$refs[e].resetFields(),this.queryData()},queryData:function(){this.queryForm("filterForm",l()({},this.condition,this.filterForm))},queryForm:function(e,t){var o=this,r={};for(var i in h()(t.roomTypeName)&&(t.roomTypeName=w.a[t.roomTypeName]),t)t[i]&&(r[i]=t[i]);"{}"!==s()(r)?this.$refs[e].validate(function(e){if(!e)return!1;o.fetchData(r)}):this.fetchData({})},submitEnableType:function(e){var t=this;if(0!==this.multipleSelection.length){var o=new f.a,r=!0,a=!1,s=void 0;try{for(var n,d=m()(this.multipleSelection);!(r=(n=d.next()).done);r=!0){var c=n.value;c.deviceUuid&&o.add(c.deviceUuid)}}catch(e){a=!0,s=e}finally{try{!r&&d.return&&d.return()}finally{if(a)throw s}}Object(C.a)([].concat(i()(o)),{status:e}).then(function(e){return e}).catch(function(){}).finally(function(){t.queryForm("filterForm",l()({},t.condition,t.filterForm))}),this.enableType=g.NONE}else y.Message.info("应当选择一条数据")},handleSelectionChange:function(e){this.multipleSelection=e},handleSortChanged:function(e){e.column,e.prop;var t=e.order;this.sortType=t,this.queryForm("filterForm",l()({},this.condition,this.filterForm))},enableDevice:function(){this.checkSelection()&&(this.enableType=g.ENABLED)},disabledDevice:function(){this.checkSelection()&&(this.enableType=g.DISABLED)},handleStoreName:function(e,t){var o=this.selStoreList.filter(function(t){return t.value===e}),r=o[0]&&o[0].key||"";o.length&&r?(this[t].storeName=r,this[t].storeId=e):Object(y.Message)({showClose:!0,message:"门店名称不能为空",type:"error"})},submitAdd:function(){var e=this;if("{}"!==s()(this.addForm)){var t=this.addForm.storeName||"";if(t||t.replace(/\s+$|^\s+/,"")){var o=this.addForm.brandCode||"";if(o||o.replace(/\s+$|^\s+/,"")){var r=this.addForm.typeCode||"";if(r||r.replace(/\s+$|^\s+/,"")){var i=this.addForm.roomNo||"";if(i||i.replace(/\s+$|^\s+/,"")){var a=this.addForm.roomType||"";if(a||a.replace(/\s+$|^\s+/,"")){var n=this.addForm.uuid||"";n||n.replace(/\s+$|^\s+/,"")?Object(C.g)(this.addForm.uuid).then(function(t){t.value?Object(y.Message)({showClose:!0,message:"此设备已注册",type:"error"}):Object(C.h)({brandCode:e.addForm.brandCode,typeCode:e.addForm.typeCode,roomNo:e.addForm.roomNo,roomType:e.addForm.roomType,storeId:e.addForm.storeId,uuid:e.addForm.uuid}).then(function(t){e.resetForm("addForm"),e.deviceModels=[],Object(y.Message)({showClose:!0,message:"添加成功",type:"success"})}).catch(function(){e.resetForm("addForm"),e.deviceModels=[],Object(y.Message)({showClose:!0,message:"添加失败",type:"error"})}).finally(function(){e.addVisible=!1})}):Object(y.Message)({showClose:!0,message:"uuid不能为空",type:"error"})}else Object(y.Message)({showClose:!0,message:"设备房间类型不能为空",type:"error"})}else Object(y.Message)({showClose:!0,message:"房间号不能为空",type:"error"})}else Object(y.Message)({showClose:!0,message:"设备型号不能为空",type:"error"})}else Object(y.Message)({showClose:!0,message:"设备品牌不能为空",type:"error"})}else Object(y.Message)({showClose:!0,message:"门店名称不能为空",type:"error"})}else Object(y.Message)({showClose:!0,message:"必填字段不能为空",type:"error"})},checkSelection:function(){if(!(this.multipleSelection.length<1))return!0;y.Message.info("选择一条数据")},handleEdit:function(e){var t=this;this.editVisible=!0,Object(F.b)({storeId:e.storeId}).then(function(o){t.roomTypes=o,t.editForm.storeName=e.storeName,t.editForm.storeId=e.storeId,t.editForm.brandCode=e.deviceBrand,t.editForm.typeCode=e.deviceModel,t.editForm.roomNo=e.roomNo,t.editForm.roomType=function(){switch(e.roomTypeName){case"智能电视":return 1001;case"影音房":return 1002}}(),t.editForm.uuid=e.deviceUuid,t.editForm.devicesId=e.deviceId})},showDialog:function(e,t){this[e]=t},cancelSubmit:function(e,t){this[t]=!1,this.resetForm(e)},handleCloseE:function(e){this.resetForm("editForm"),e()},handleCloseA:function(e){this.resetForm("addForm"),e()},submitEdit:function(){var e=this,t={},o=!0,r=!1,i=void 0;try{for(var a,n=m()(this.roomTypes);!(o=(a=n.next()).done);o=!0){var l=a.value;if(l&&l.typeCode===this.editForm.roomType&&!l.status){t=l;break}}}catch(e){r=!0,i=e}finally{try{!o&&n.return&&n.return()}finally{if(r)throw i}}if(t.typeCode)Object(y.Message)({showClose:!0,message:"当前门店尚未开启"+t.typeName+"业务",type:"error"});else if("{}"!==s()(this.editForm)){var d=this.editForm.storeName||"";if(d||d.replace(/\s+$|^\s+/,"")){var c=this.editForm.brandCode||"";if(c||c.replace(/\s+$|^\s+/,"")){var u=this.editForm.typeCode||"";if(u||u.replace(/\s+$|^\s+/,"")){var p=this.editForm.roomNo||"";if(p||p.replace(/\s+$|^\s+/,"")){var f=this.editForm.roomType||"";if(f||f.replace(/\s+$|^\s+/,"")){var v=this.editForm.uuid||"";v||v.replace(/\s+$|^\s+/,"")?Object(F.b)({storeId:this.editForm.storeId}).then(function(t){for(var o=0;o<t.length;o++){var r=t[o];if(!r.status&&r.typeCode===e.editForm.roomType)return Object(y.Message)({showClose:!0,message:"当前门店尚未开启"+r.typeName+"业务",type:"error"})}Object(C.j)({brandCode:e.editForm.brandCode,typeCode:e.editForm.typeCode,devicesId:e.editForm.devicesId,roomNo:e.editForm.roomNo,roomType:e.editForm.roomType,storeId:e.editForm.storeId,uuid:e.editForm.uuid}).then(function(t){e.editVisible=!1,e.resetForm("editForm"),e.queryData()}).catch(function(){})}):Object(y.Message)({showClose:!0,message:"uuid不能为空",type:"error"})}else Object(y.Message)({showClose:!0,message:"设备房间类型不能为空",type:"error"})}else Object(y.Message)({showClose:!0,message:"房间号不能为空",type:"error"})}else Object(y.Message)({showClose:!0,message:"设备型号不能为空",type:"error"})}else Object(y.Message)({showClose:!0,message:"设备品牌不能为空",type:"error"})}else Object(y.Message)({showClose:!0,message:"门店名称不能为空",type:"error"})}else Object(y.Message)({showClose:!0,message:"必填字段不能为空",type:"error"})},searchStoreList:function(e){var t=this;""!==e?(this.loading=!0,setTimeout(function(){t.loading=!1,Object(C.f)(e).then(function(o){t.selStoreList=o.filter(function(t){return t.key.toLowerCase().indexOf(e.toLowerCase())>-1})})},200)):this.selStoreList=[]}}},N={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"device-list app-container"},[e._m(0),e._v(" "),o("div",{staticClass:"content-container"},[o("div",{staticClass:"detail-content"},[o("div",{staticClass:"select-wrapper"},[o("div",{staticClass:"select-box"},[o("el-row",[o("el-col",{attrs:{span:20}},[o("el-form",{ref:"filterForm",staticClass:"filter-form",attrs:{model:e.filterForm,inline:!0,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"",prop:"internalId"}},[o("el-input",{attrs:{size:"medium",placeholder:"门店编号/门店外部编号"},model:{value:e.filterForm.internalId,callback:function(t){e.$set(e.filterForm,"internalId",t)},expression:"filterForm.internalId"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"",prop:"storeId"}},[o("el-select",{attrs:{"remote-method":e.searchStoreList,loading:e.loading,remote:"",clearable:"",filterable:"",size:"medium",placeholder:"请输入门店名称或关键字"},on:{focus:function(t){e.selStoreList=[]}},model:{value:e.filterForm.storeId,callback:function(t){e.$set(e.filterForm,"storeId",t)},expression:"filterForm.storeId"}},e._l(e.selStoreList,function(e,t){return o("el-option",{key:t,attrs:{label:e.key,value:e.value}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"",prop:"deviceBrand"}},[o("el-select",{attrs:{clearable:"",filterable:"",size:"medium",placeholder:"设备品牌"},on:{change:e.handleBrandChange,blur:function(t){e.handleBrandChange(e.filterForm.deviceBrand)}},model:{value:e.filterForm.deviceBrand,callback:function(t){e.$set(e.filterForm,"deviceBrand",t)},expression:"filterForm.deviceBrand"}},e._l(e.deviceBrands,function(e){return o("el-option",{key:e,attrs:{value:e}})}))],1),e._v(" "),e.filterForm.deviceBrand?o("el-form-item",{attrs:{label:"",prop:"deviceModel"}},[o("el-select",{attrs:{clearable:"",filterable:"",size:"medium",placeholder:"设备型号"},model:{value:e.filterForm.deviceModel,callback:function(t){e.$set(e.filterForm,"deviceModel",t)},expression:"filterForm.deviceModel"}},e._l(e.deviceModels,function(e){return o("el-option",{key:e,attrs:{value:e}})}))],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"",prop:"roomNo"}},[o("el-input",{attrs:{size:"medium",placeholder:"请输入房间号"},model:{value:e.filterForm.roomNo,callback:function(t){e.$set(e.filterForm,"roomNo",t)},expression:"filterForm.roomNo"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"",prop:"deviceUuid"}},[o("el-input",{attrs:{size:"medium",placeholder:"UUID"},model:{value:e.filterForm.deviceUuid,callback:function(t){e.$set(e.filterForm,"deviceUuid",t)},expression:"filterForm.deviceUuid"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"",prop:"apkVersion"}},[o("el-input",{attrs:{size:"medium",placeholder:"精确输入apkVersion",title:"apkVersion仅支持精确查询"},model:{value:e.filterForm.apkVersion,callback:function(t){e.$set(e.filterForm,"apkVersion",t)},expression:"filterForm.apkVersion"}})],1)],1)],1),e._v(" "),o("el-col",{attrs:{span:4}},[o("el-button",{staticClass:"btn-primary",attrs:{size:"medium"},on:{click:e.queryData}},[e._v("查询")]),e._v(" "),o("el-button",{staticClass:"btn-default",attrs:{size:"medium"},on:{click:function(t){e.resetForm("filterForm")}}},[e._v("重置")])],1)],1)],1)]),e._v(" "),o("div",{staticClass:"buttons"},[o("el-button",{staticClass:"btn-primary",attrs:{size:"small"},on:{click:function(t){e.showDialog("addVisible",!0)}}},[e._v("添加设备")]),e._v(" "),o("el-button",{attrs:{disabled:e.multipleSelection.length<1,type:"warning",size:"small"},on:{click:e.enableDevice}},[e._v("启用设备")]),e._v(" "),o("el-button",{attrs:{disabled:e.multipleSelection.length<1,type:"danger",size:"small"},on:{click:e.disabledDevice}},[e._v("禁用设备")])],1),e._v(" "),o("div",{staticClass:"device-table-wrapper"},[o("el-table",{staticClass:"device-table",attrs:{data:e.dataList,stripe:"",border:""},on:{"sort-change":e.handleSortChanged,"selection-change":e.handleSelectionChange,"filter-change":e.filterChanged}},[o("el-table-column",{attrs:{type:"selection"}}),e._v(" "),o("el-table-column",{attrs:{prop:"internalId",label:"门店编号",width:"80"}}),e._v(" "),o("el-table-column",{attrs:{prop:"externalId",label:"门店外部编号",width:"100"}}),e._v(" "),o("el-table-column",{attrs:{prop:"storeName",label:"门店名称",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{staticClass:"has-underline",on:{click:function(o){e.navToDeviceDetail(t.row)}}},[e._v(e._s(t.row.storeName))])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"roomNo",label:"房间号",width:"90",sortable:"'custom'"}}),e._v(" "),o("el-table-column",{attrs:{"column-key":"roomTypeName","filter-multiple":!1,filters:e.roomTypeNames,"filter-method":e.filterRoomTypeName,prop:"roomTypeName",label:"房间类型",width:"100"}}),e._v(" "),o("el-table-column",{attrs:{prop:"deviceBrand",label:"终端品牌",width:"130"}}),e._v(" "),o("el-table-column",{attrs:{prop:"deviceModel",label:"终端型号",width:"120"}}),e._v(" "),o("el-table-column",{attrs:{prop:"deviceUuid",label:"终端UUID",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{staticClass:"has-underline",on:{click:function(o){e.showDeviceDetail(t.row)}}},[e._v(e._s(t.row.deviceUuid))])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"apkVersion",label:"apk版本号",width:"110"}}),e._v(" "),o("el-table-column",{attrs:{"column-key":"status","filter-multiple":!1,filters:[{text:"启用",value:2},{text:"禁用",value:4}],"filter-method":e.filterStatus,prop:"status",label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(2===t.row.status?"启用":4===t.row.status?"禁用":""))])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"edit",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{staticClass:"btn-primary",attrs:{type:"primary",size:"mini"},on:{click:function(o){e.handleEdit(t.row)}}},[e._v("编辑")])]}}])})],1)],1),e._v(" "),o("div",{staticClass:"pagination-wrapper"},[o("el-pagination",{staticClass:"text-center",attrs:{total:e.total,"current-page":e.pageIndex,"page-sizes":[20,50,100],"page-size":e.pageSize,background:"",layout:"prev, pager, next, jumper, sizes, total"},on:{"current-change":e.pageChanged,"size-change":e.sizeChanged}})],1)])]),e._v(" "),o("device-detail-dialog",{attrs:{"dialog-data":e.dialogData,"need-show":e.needShow},on:{close:e.showDialog}}),e._v(" "),o("el-dialog",{staticClass:"edit-form",attrs:{"before-close":e.handleCloseE,"close-on-click-modal":!1,visible:e.editVisible,title:"设备编辑"},on:{"update:visible":function(t){e.editVisible=t}}},[o("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editRules}},[o("el-form-item",{attrs:{"label-width":e.labelWidth,label:"所属门店",prop:"storeName"}},[o("el-select",{attrs:{"remote-method":e.searchStoreList,loading:e.loading,remote:"",clearable:"",filterable:"",placeholder:"请输入门店名称或关键字"},on:{change:function(t){e.handleStoreName(t,"editForm")}},model:{value:e.editForm.storeName,callback:function(t){e.$set(e.editForm,"storeName",t)},expression:"editForm.storeName"}},e._l(e.selStoreList,function(e,t){return o("el-option",{key:t,attrs:{label:e.key,value:e.value}})}))],1),e._v(" "),o("el-form-item",{attrs:{"label-width":e.labelWidth,label:"设备品牌",prop:"brandCode"}},[o("el-select",{attrs:{placeholder:"请选择设备品牌"},on:{change:e.handleBrandChangeEdit},model:{value:e.editForm.brandCode,callback:function(t){e.$set(e.editForm,"brandCode",t)},expression:"editForm.brandCode"}},e._l(e.deviceBrands,function(e){return o("el-option",{key:e,attrs:{value:e}})}))],1),e._v(" "),o("el-form-item",{attrs:{"label-width":e.labelWidth,label:"设备型号",prop:"typeCode"}},[o("el-select",{attrs:{placeholder:"请选择设备型号"},on:{focus:function(t){e.handleBrandChangeEdit(e.editForm.brandCode)}},model:{value:e.editForm.typeCode,callback:function(t){e.$set(e.editForm,"typeCode",t)},expression:"editForm.typeCode"}},e._l(e.deviceModels,function(e){return o("el-option",{key:e,attrs:{value:e}})}))],1),e._v(" "),o("el-form-item",{attrs:{"label-width":e.labelWidth,label:"房间号",prop:"roomNo"}},[o("el-input",{attrs:{placeholder:"请输入房间号"},model:{value:e.editForm.roomNo,callback:function(t){e.$set(e.editForm,"roomNo",t)},expression:"editForm.roomNo"}})],1),e._v(" "),o("el-form-item",{attrs:{"label-width":e.labelWidth,label:"设备房间类型",prop:"roomType"}},[o("el-select",{attrs:{placeholder:"请选择设备房间类型"},model:{value:e.editForm.roomType,callback:function(t){e.$set(e.editForm,"roomType",t)},expression:"editForm.roomType"}},e._l(e.roomTypes,function(t,r){return o("el-option",{key:r,attrs:{label:t.typeName,value:t.typeCode}},[e._v("\n            "+e._s(t.typeName)+"\n          ")])}))],1),e._v(" "),o("el-form-item",{attrs:{"label-width":e.labelWidth,label:"设备UUID",prop:"uuid"}},[o("el-input",{attrs:{value:e.editForm.uuid,disabled:"",placeholder:"请输入设备UUID"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer text-center",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticClass:"btn-default",attrs:{size:"medium"},on:{click:function(t){e.cancelSubmit("editForm","editVisible")}}},[e._v("取消")]),e._v(" "),o("el-button",{staticClass:"btn-primary",attrs:{size:"medium"},on:{click:e.submitEdit}},[e._v("确定")])],1)],1),e._v(" "),o("el-dialog",{staticClass:"edit-form",attrs:{"before-close":e.handleCloseA,"close-on-click-modal":!1,visible:e.addVisible,title:"添加设备"},on:{"update:visible":function(t){e.addVisible=t}}},[o("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addRules}},[o("el-form-item",{attrs:{"label-width":e.labelWidth,label:"所属门店",prop:"storeId"}},[o("el-select",{attrs:{"remote-method":e.searchStoreList,loading:e.loading,remote:"",clearable:"",filterable:"",placeholder:"请输入门店名称或关键字"},on:{change:function(t){e.handleStoreName(t,"addForm")}},model:{value:e.addForm.storeId,callback:function(t){e.$set(e.addForm,"storeId",t)},expression:"addForm.storeId"}},e._l(e.selStoreList,function(e,t){return o("el-option",{key:t,attrs:{label:e.key,value:e.value}})}))],1),e._v(" "),o("el-form-item",{attrs:{"label-width":e.labelWidth,label:"设备品牌",prop:"brandCode"}},[o("el-select",{attrs:{placeholder:"请选择设备品牌"},on:{change:e.handleBrandChangeAdd},model:{value:e.addForm.brandCode,callback:function(t){e.$set(e.addForm,"brandCode",t)},expression:"addForm.brandCode"}},e._l(e.deviceBrands,function(e){return o("el-option",{key:e,attrs:{value:e}})}))],1),e._v(" "),e.addForm.brandCode?o("el-form-item",{attrs:{"label-width":e.labelWidth,label:"设备型号",prop:"typeCode"}},[o("el-select",{attrs:{placeholder:"请选择设备型号"},model:{value:e.addForm.typeCode,callback:function(t){e.$set(e.addForm,"typeCode",t)},expression:"addForm.typeCode"}},e._l(e.deviceModels,function(e){return o("el-option",{key:e,attrs:{value:e}})}))],1):e._e(),e._v(" "),o("el-form-item",{attrs:{"label-width":e.labelWidth,label:"房间号",prop:"roomNo"}},[o("el-input",{attrs:{placeholder:"请输入房间号"},model:{value:e.addForm.roomNo,callback:function(t){e.$set(e.addForm,"roomNo",t)},expression:"addForm.roomNo"}})],1),e._v(" "),o("el-form-item",{attrs:{"label-width":e.labelWidth,label:"设备房间类型",prop:"roomType"}},[o("el-select",{attrs:{placeholder:"请选择设备房间类型"},model:{value:e.addForm.roomType,callback:function(t){e.$set(e.addForm,"roomType",t)},expression:"addForm.roomType"}},e._l(e.roomTypeNames,function(t,r){return o("el-option",{key:r,attrs:{label:t.text,value:t.value}},[e._v("\n            "+e._s(t.text)+"\n          ")])}))],1),e._v(" "),o("el-form-item",{attrs:{"label-width":e.labelWidth,label:"设备UUID",prop:"uuid"}},[o("el-input",{attrs:{placeholder:"请输入设备UUID"},model:{value:e.addForm.uuid,callback:function(t){e.$set(e.addForm,"uuid",t)},expression:"addForm.uuid"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer text-center",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticClass:"btn-default",attrs:{size:"medium"},on:{click:function(t){e.cancelSubmit("addForm","addVisible")}}},[e._v("取消")]),e._v(" "),o("el-button",{staticClass:"btn-primary",attrs:{size:"medium"},on:{click:e.submitAdd}},[e._v("确定")])],1)],1),e._v(" "),o("el-dialog",{staticClass:"enable-status-dialog",attrs:{"show-close":!1,visible:e.enableVisible,title:"设备状态",width:"30%",center:""}},[o("div",{staticClass:"enable-text"},[e._v(e._s(e.enableText))]),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticClass:"btn-default",attrs:{size:"medium"},on:{click:function(t){e.enableType=e.EnabledType.NONE}}},[e._v("取消")]),e._v(" "),o("el-button",{staticClass:"btn-primary",attrs:{size:"medium",type:"primary"},on:{click:function(t){e.submitEnableType(e.enableType)}}},[e._v("确定")])],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title-box"},[t("span",{staticClass:"main-title"},[this._v("设备管理列表")]),this._v(" "),t("span",{staticClass:"device-tip"},[this._v("（点击门店名称查看门店详情、点击终端UUID查看设备详情）")])])}]};var k=o("VU/8")(D,N,!1,function(e){o("WfDM")},null,null);t.default=k.exports},ER89:function(e,t,o){"use strict";t.f=function(e){return Object(r.a)({url:"http://192.168.14.86:8080/ott-manage/rest/ott/store?storeName="+e,method:"get"})},t.d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,a=arguments[3],s={};"ascending"===a&&(s.roomNoSortType=0);"descending"===a&&(s.roomNoSortType=1);return s.pageIndex=t,s.pageSize=o,Object(r.a)({url:"http://192.168.14.86:8080/ott-manage/rest/ott/device/list",method:"post",params:s,data:e,headers:{"Content-Type":"application/json",token:Object(i.a)()}})},t.c=function(){return Object(r.a)({url:"http://192.168.14.86:8080/ott-manage/rest/ott/device/brand",method:"get"})},t.a=function(e,t){return Object(r.a)({url:"http://192.168.14.86:8080/ott-manage/rest/ott/device/status",method:"put",data:e,params:t,headers:{token:Object(i.a)()}})},t.j=function(e){return Object(r.a)({url:"http://192.168.14.86:8080/ott-manage/rest/ott/device/update",method:"post",data:e,headers:{token:Object(i.a)()}})},t.i=function(e){return Object(r.a)({url:"http://192.168.14.15:8080/gaia/rest/store/"+e,method:"get",headers:{"EVA-ACCESS-TOKEN":Object(i.a)()}})},t.b=function(e){return Object(r.a)({url:"http://192.168.14.86:8080/ott-manage/rest/ott/device/detail",method:"get",params:e})},t.g=function(e){return Object(r.a)({url:"http://192.168.14.86:8080/ott-manage/rest/ott/device/register/check",method:"get",params:{token:Object(i.a)(),uuid:e}})},t.h=function(e){return Object(r.a)({url:"http://192.168.14.86:8080/ott-manage/rest/ott/device/register/"+Object(i.a)(),method:"post",data:e})},t.e=function(e){return Object(r.a)({url:"http://192.168.14.86:8080/ott-manage/rest/ott/device/model/"+e,method:"get"})};var r=o("vLgD"),i=o("TIfe")},HpRW:function(e,t,o){"use strict";var r=o("kM2E"),i=o("lOnJ"),a=o("+ZMJ"),s=o("NWt+");e.exports=function(e){r(r.S,e,{from:function(e){var t,o,r,n,l=arguments[1];return i(this),(t=void 0!==l)&&i(l),void 0==e?new this:(o=[],t?(r=0,n=a(l,arguments[2],2),s(e,!1,function(e){o.push(n(e,r++))})):s(e,!1,o.push,o),new this(o))}})}},"J+pN":function(e,t){},LIJb:function(e,t,o){var r=o("EqjI");e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},WfDM:function(e,t){},fZjL:function(e,t,o){e.exports={default:o("jFbC"),__esModule:!0}},fxRn:function(e,t,o){o("+tPU"),o("zQR9"),e.exports=o("g8Ux")},g8Ux:function(e,t,o){var r=o("77Pl"),i=o("3fs2");e.exports=o("FeBl").getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},ioQ5:function(e,t,o){o("HpRW")("Set")},jFbC:function(e,t,o){o("Cdx3"),e.exports=o("FeBl").Object.keys},"l+zr":function(e,t,o){"use strict";var r=o("pFYg"),i=o.n(r);function a(e,t){var o=new Date(e);return t?function(e,t){if(0===arguments.length)return null;var o=t||"{y}-{m}-{d} {h}:{i}:{s}",r=void 0;"object"===(void 0===e?"undefined":i()(e))?r=e:(10===(""+e).length&&(e=1e3*parseInt(e)),r=new Date(e));var a={y:r.getFullYear(),m:r.getMonth()+1,d:r.getDate(),h:r.getHours(),i:r.getMinutes(),s:r.getSeconds(),a:r.getDay()};return o.replace(/{(y|m|d|h|i|s|a)+}/g,function(e,t){var o=a[t];return"a"===t?["一","二","三","四","五","六","日"][o-1]:(e.length>0&&o<10&&(o="0"+o),o||0)})}(e,t):o.getUTCFullYear()+"年"+(o.getMonth()+1)+"月"+o.getDate()+"日"+o.getHours()+"时"+o.getMinutes()+"分"}var s={name:"DeviceDetailDialog",filters:{formatDate:function(e){return a(e)}},props:{"need-show":{default:!1,type:Boolean},dialogData:{default:null,type:Object}}},n={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.needShow?o("div",{staticClass:"device-detail-dialog"},[o("div",{staticClass:"dialog-box"},[o("div",{staticClass:"dialog-content animated bounceInDown"},[o("div",{staticClass:"dialog-header clearfix"},[o("span",{staticClass:"device-title"},[e._v("设备详情")]),e._v(" "),o("span",{staticClass:"status"},[e._v(e._s(2===e.dialogData.status?"已启用":4===e.dialogData.status?"禁用":""))]),e._v(" "),o("span",{staticClass:"time"},[e._v(e._s(e._f("formatDate")(e.dialogData.updateTime)))])]),e._v(" "),o("div",{staticClass:"solid-line"}),e._v(" "),o("div",{staticClass:"info-item"},[e._m(0),e._v(" "),o("div",{staticClass:"list-content clearfix"},[o("el-row",{staticClass:"list-item",attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("div",{staticClass:"no-wrap"},[e._v("所属集团："+e._s(e.dialogData.organizationName))])]),e._v(" "),o("el-col",{attrs:{span:12}},[o("div",{staticClass:"no-wrap"},[e._v("所属品牌："+e._s(e.dialogData.brandName||"--"))])])],1),e._v(" "),o("el-row",{staticClass:"list-item",attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("div",{staticClass:"no-wrap"},[e._v("门店编号："+e._s(e.dialogData.internalId))])]),e._v(" "),o("el-col",{attrs:{span:12}},[o("div",{staticClass:"no-wrap"},[e._v("门店外部编号："+e._s(e.dialogData.externalId||"--"))])]),e._v(" "),o("el-col",{attrs:{span:12}},[o("div",{staticClass:"no-wrap"},[e._v("所属门店："+e._s(e.dialogData.storeName))])])],1)],1)]),e._v(" "),o("div",{staticClass:"info-item"},[e._m(1),e._v(" "),o("div",{staticClass:"list-content clearfix"},[o("el-row",{staticClass:"list-item",attrs:{gutter:20}},[o("el-col",{attrs:{span:14}},[o("div",{staticClass:"no-wrap"},[e._v("设备品牌："+e._s(e.dialogData.deviceBrand))])]),e._v(" "),o("el-col",{attrs:{span:10}},[o("div",{staticClass:"no-wrap"},[e._v("设备型号："+e._s(e.dialogData.deviceModel))])])],1),e._v(" "),o("el-row",{staticClass:"list-item",attrs:{gutter:20}},[o("el-col",{attrs:{span:14}},[o("div",{staticClass:"no-wrap"},[e._v("设备UUID："+e._s(e.dialogData.deviceUuid))])]),e._v(" "),o("el-col",{attrs:{span:10}},[o("div",{staticClass:"no-wrap"},[e._v("安装时间："+e._s(e._f("formatDate")(e.dialogData.createdTime)))])])],1),e._v(" "),o("el-row",{staticClass:"list-item",attrs:{gutter:20}},[o("el-col",{attrs:{span:14}},[o("div",{staticClass:"no-wrap"},[e._v("APK版本号："+e._s(e.dialogData.apkVersion))])]),e._v(" "),o("el-col",{attrs:{span:10}},[o("div",{staticClass:"no-wrap"},[e._v("设备状态："+e._s(2===e.dialogData.status?"启用":"禁用"))])])],1)],1)]),e._v(" "),o("div",{staticClass:"info-item"},[e._m(2),e._v(" "),o("div",{staticClass:"list-content clearfix"},[o("el-row",{staticClass:"list-item",attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("div",{staticClass:"no-wrap"},[e._v("所属房间："+e._s(e.dialogData.roomNo))])]),e._v(" "),o("el-col",{attrs:{span:12}},[o("div",{staticClass:"no-wrap"},[e._v("房间类型："+e._s(e.dialogData.roomTypeName))])])],1)],1)]),e._v(" "),o("div",{staticClass:"placeholder"}),e._v(" "),o("div",{staticClass:"close-btn",attrs:{title:"关闭"},on:{click:function(t){e.$emit("close","needShow",!1)}}},[e._v("×")])])])]):e._e()},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"info-title"},[t("span",[this._v("门店信息")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"info-title"},[t("span",[this._v("设备信息")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"info-title"},[t("span",[this._v("安装信息")])])}]};var l=o("VU/8")(s,n,!1,function(e){o("J+pN")},null,null);t.a=l.exports},lHA8:function(e,t,o){e.exports={default:o("pPW7"),__esModule:!0}},m9gC:function(e,t,o){var r=o("RY/4"),i=o("4WTo");e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},oNmr:function(e,t,o){o("9Bbf")("Set")},oeOm:function(e,t,o){var r=o("7Doy");e.exports=function(e,t){return new(r(e))(t)}},pPW7:function(e,t,o){o("M6a0"),o("zQR9"),o("+tPU"),o("ttyz"),o("BDhv"),o("oNmr"),o("ioQ5"),e.exports=o("FeBl").Set},qo66:function(e,t,o){"use strict";var r=o("7KvD"),i=o("kM2E"),a=o("06OY"),s=o("S82l"),n=o("hJx8"),l=o("xH/j"),d=o("NWt+"),c=o("2KxR"),u=o("EqjI"),m=o("e6n0"),p=o("evD5").f,f=o("ALrJ")(0),v=o("+E39");e.exports=function(e,t,o,h,b,g){var y=r[e],_=y,C=b?"set":"add",F=_&&_.prototype,w={};return v&&"function"==typeof _&&(g||F.forEach&&!s(function(){(new _).entries().next()}))?(_=t(function(t,o){c(t,_,e,"_c"),t._c=new y,void 0!=o&&d(o,b,t[C],t)}),f("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in F&&(!g||"clear"!=e)&&n(_.prototype,e,function(o,r){if(c(this,_,e),!t&&g&&!u(o))return"get"==e&&void 0;var i=this._c[e](0===o?0:o,r);return t?this:i})}),g||p(_.prototype,"size",{get:function(){return this._c.size}})):(_=h.getConstructor(t,e,b,C),l(_.prototype,o),a.NEED=!0),m(_,e),w[e]=_,i(i.G+i.W+i.F,w),g||h.setStrong(_,e,b),_}},ttyz:function(e,t,o){"use strict";var r=o("9C8M"),i=o("LIJb");e.exports=o("qo66")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},uqUo:function(e,t,o){var r=o("kM2E"),i=o("FeBl"),a=o("S82l");e.exports=function(e,t){var o=(i.Object||{})[e]||Object[e],s={};s[e]=t(o),r(r.S+r.F*a(function(){o(1)}),"Object",s)}}});
//# sourceMappingURL=0.ebce402f1a8e2678bf27.js.map